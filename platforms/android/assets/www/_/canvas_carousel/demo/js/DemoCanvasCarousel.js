function ScrollBar(a,b){this.x=a.scrollbarPosX;this.y=a.scrollbarPosY;this.width=a.scrollbarWidth;this.height=a.scrollbarHeight;this.trackColor=a.scrollbarTrackColor;this.handlerColor=a.scrollbarHandlerColor;this.nrItems=a.nrImages;this.handlerWidth=a.scrollbarHandlerWidth;this.unitWidth=(this.width-this.handlerWidth)/(this.nrItems-1);this.track=new Shape;this.handler=new Container;this.handlerBar=new Shape;this.addChild(this.track);this.addChild(this.handler);this.track.graphics=new Graphics;this.track.graphics.beginFill("#FFFFFF");this.track.graphics.drawRect(0,0,this.width,this.height);this.track.graphics.endFill();this.handlerBar.graphics=new Graphics;this.handlerBar.graphics.beginFill("#FFFFFF");this.handlerBar.graphics.drawRect(0,0,this.handlerWidth,this.height);this.handlerBar.graphics.endFill();this.lines=new Bitmap(b);this.lines.regX=Math.floor(this.lines.image.width/2);this.lines.regY=Math.floor(this.lines.image.height/2);var c=this.height/this.lines.image.height;this.lines.scaleX=c;this.lines.scaleY=c;this.handler.addChild(this.handlerBar);this.handler.addChild(this.lines);this.lines.x=Math.floor(this.handlerWidth/2);this.lines.y=Math.floor(this.height/2);this.track.cache(0,0,this.width,this.height);this.handlerBar.cache(0,0,this.handlerWidth,this.height);this.lines.cache(0,0,this.lines.image.width,this.lines.image.height);this.gotoItem=function(a){Tween.get(this.handler,{override:true}).to({x:Math.floor(a*this.unitWidth)},1e3,Ease.cubicOut)}}function TransitionPreloader(a){this.x=a.transPrelPosX;this.y=a.transPrelPosY;this.size=a.transPrelSize;this.bgColor=a.transPrelBgColor;this.fillColor=a.transPrelFillColor;this.rotation=-90;this.fillPreloader=function(a){var b=Math.PI*2*a;this.graphics=new Graphics;this.graphics.beginFill(this.bgColor);this.graphics.drawCircle(0,0,this.size/2);this.graphics.endFill();this.graphics.beginFill(this.fillColor);this.graphics.lineTo(this.size/2,0);this.graphics.arc(0,0,this.size/2,0,b,false);this.graphics.lineTo(0,0);this.graphics.endFill()}}function Thumb(a,b,c,d){this.id=a;this.imagePath=b;this.text=c;this.url=d;this.angle=0;this.positionZ=0;this.selected=false;this.posterPath=null;this.container=new Container;this.imgContainer=new Container;this.bg=new Shape;this.imgH=0;this.setImage=function(a,b,c){var d=a.image.width;var e=a.image.height;this.imgH=e;var f=b.borderSize;this.bg=new Shape;this.bg.graphics=new Graphics;this.bg.graphics.beginFill(b.borderColor);this.bg.graphics.drawRect(0,0,d+f*2,e+f*2);this.bg.cache(0,0,d+f*2,e+f*2);this.imgContainer.addChild(this.bg);a.x=f;a.y=f;this.imgContainer.addChild(a);this.container.addChild(this.imgContainer);this.imgContainer.cache(0,0,d+f*2,e+f*2);var g=b.reflHeight;g*=e/b.thumbHeight;g+=f;$("#"+c).prepend("<canvas id='carouselReflCanvas'></canvas>");var h=$("#carouselReflCanvas");$(h).attr({width:d+f*2,height:g});ctx=h[0].getContext("2d");ctx.save();ctx.translate(0,e+f*2-1);ctx.scale(1,-1);ctx.drawImage(this.imgContainer.cacheCanvas,0,0,d+f*2,e+f*2);ctx.restore();ctx.globalCompositeOperation="destination-out";gradient=ctx.createLinearGradient(0,0,0,g);gradient.addColorStop(0,"rgba(255, 255, 255, "+(1-b.reflTransparency)+")");gradient.addColorStop(1,"rgba(255, 255, 255, 1.0)");ctx.fillStyle=gradient;ctx.fillRect(0,0,d+f*2,g);this.reflection=new Bitmap(h[0]);this.container.addChild(this.reflection);this.reflection.y=e+f*2+b.reflDistance;$("#carouselReflCanvas").remove();if(!b.showReflection){this.reflection.visible=false}else{this.imgContainer.cache(0,0,d+f*2,e+f*2+g+b.reflDistance)}this.width=a.image.width+f*2;this.height=a.image.height+f*2;this.imageWidth=this.width;this.imageHeight=this.height};this.setBorderColor=function(a){this.bg.graphics=new Graphics;this.bg.graphics.beginFill(a);this.bg.graphics.drawRect(0,0,this.imageWidth,this.imageHeight);this.bg.updateCache()}}function Data(a){function c(a){b.canvasWidth=parseInt($(a).find("canvas_width").text());b.canvasHeight=parseInt($(a).find("canvas_height").text());b.centerX=parseInt($(a).find("carousel_center_x").text());b.centerY=parseInt($(a).find("carousel_center_y").text());b.radiusX=parseInt($(a).find("radius_x").text());b.radiusY=parseInt($(a).find("radius_y").text());b.radiusZ=parseInt($(a).find("radius_z").text());b.carouselAngle=parseInt($(a).find("carousel_rotation_angle").text());b.backThumbTransparency=$(a).find("back_thumb_transparency").text();b.backgroundColor=$(a).find("background_color").text();if($(a).find("auto_play").text()=="yes")b.autoplay=true;else b.autoplay=false;if($(a).find("enable_mouse_wheel").text()=="yes")b.mousewheel=true;else b.mousewheel=false;b.slideshowDelay=parseFloat($(a).find("slideshow_delay").text())*1e3;b.preloaderPath=$(a).find("preloader_path").text();b.preloaderSize=parseInt($(a).find("preloader_size").text());b.preloaderColor=$(a).find("preloader_color").text();b.buttonsBackgroundPath=$(a).find("buttons_background_path").text();b.buttonsNextIconPath=$(a).find("buttons_next_icon_path").text();b.buttonsPrevIconPath=$(a).find("buttons_prev_icon_path").text();b.buttonsPlayIconPath=$(a).find("buttons_play_icon_path").text();b.buttonsPauseIconPath=$(a).find("buttons_pause_icon_path").text();if($(a).find("show_next_button").text()=="yes")b.showNextBtn=true;else b.showNextBtn=false;if($(a).find("show_prev_button").text()=="yes")b.showPrevBtn=true;else b.showPrevBtn=false;if($(a).find("show_play_button").text()=="yes")b.showPlayBtn=true;else b.showPlayBtn=false;b.nextButtonPosX=parseInt($(a).find("next_button_x_position").text());b.nextButtonPosY=parseInt($(a).find("next_button_y_position").text());b.prevButtonPosX=parseInt($(a).find("prev_button_x_position").text());b.prevButtonPosY=parseInt($(a).find("prev_button_y_position").text());b.playButtonPosX=parseInt($(a).find("play_button_x_position").text());b.playButtonPosY=parseInt($(a).find("play_button_y_position").text());b.nextBtnBgColor=$(a).find("next_button_background_color").text();b.nextBtnIcColor=$(a).find("next_button_icon_color").text();b.prevBtnBgColor=$(a).find("prev_button_background_color").text();b.prevBtnIcColor=$(a).find("prev_button_icon_color").text();b.playBtnBgColor=$(a).find("play_button_background_color").text();b.playBtnIcColor=$(a).find("play_button_icon_color").text();if($(a).find("show_scrollbar").text()=="yes")b.showScrollbar=true;else b.showScrollbar=false;b.scrollbarPosX=parseInt($(a).find("scrollbar_x_position").text());b.scrollbarPosY=parseInt($(a).find("scrollbar_y_position").text());b.scrollbarWidth=parseInt($(a).find("scrollbar_width").text());b.scrollbarHeight=parseInt($(a).find("scrollbar_height").text());b.scrollbarHandlerWidth=parseInt($(a).find("scrollbar_handler_width").text());b.scrollbarHandlerColor=$(a).find("scrollbar_handler_color").text();b.scrollbarTrackColor=$(a).find("scrollbar_track_bar_color").text();b.scrollbarLinesPath=$(a).find("scrollbar_lines_image_path").text();b.thumbWidth=parseInt($(a).find("image_width").text());b.thumbHeight=parseInt($(a).find("image_height").text());b.borderSize=parseInt($(a).find("border_size").text());b.borderColor=$(a).find("border_color").text();b.tooltipFont=$(a).find("tooltip_font").text();b.tooltipTextSize=parseInt($(a).find("tooltip_text_size").text());b.tooltipTextColor=$(a).find("tooltip_text_color").text();b.tooltipBgColor=$(a).find("tooltip_background_color").text();if($(a).find("show_reflection").text()=="yes")b.showReflection=true;else b.showReflection=false;b.reflHeight=parseInt($(a).find("reflection_height").text());b.reflDistance=parseInt($(a).find("reflection_distance").text());b.reflTransparency=$(a).find("reflection_transparency").text();b.transPrelPosX=parseInt($(a).find("slide_show_preloader_x_position").text());b.transPrelPosY=parseInt($(a).find("slide_show_preloader_y_position").text());b.transPrelSize=parseInt($(a).find("slide_show_preloader_size").text());b.transPrelBgColor=$(a).find("slide_show_preloader_background_color").text();b.transPrelFillColor=$(a).find("slide_show_preloader_fill_color").text();$(a).find("image").each(function(){var a=b.nrImages++;var c=new Thumb(a,$(this).find("image_path").text(),$(this).find("text").text(),$(this).find("url_to_open_on_click").text());b.thumbsAr[a]=c});$(b).trigger("loaded")}var b=this;b.nrImages=0;b.thumbsAr=new Array;$.ajax({type:"GET",url:a,dataType:"xml",success:c,error:function(a,b){alert("Error with the xml file: "+b)}})}function DemoCanvasCarousel(a,b){function bU(a,b,d,e,f,g,h,i,j){Tween.get(bc,{override:true}).to({radiusX:a,radiusY:b,radiusZ:d},1e3,Ease.cubicOut);Tween.get(K,{override:true}).to({centerX:parseInt(bc.centerX)+e,centerY:parseInt(bc.centerY)+f,carouselAngle:g},1e3,Ease.cubicOut);c.setReflDistance(h);c.setShowRefl(i);v.visible=j;var k=$("#carouselRadiusX").data("rangeinput");k.setValue(a);k=$("#carouselRadiusY").data("rangeinput");k.setValue(b);k=$("#carouselRadiusZ").data("rangeinput");k.setValue(d);k=$("#carouselCenterX").data("rangeinput");k.setValue(e);k=$("#carouselCenterY").data("rangeinput");k.setValue(f);k=$("#carouselAngle").data("rangeinput");k.setValue(g);k=$("#reflDistance").data("rangeinput");k.setValue(h);$("#showRefl").prop("checked",i);$("#showScrollbar").prop("checked",j);c.setButtonsBgColor("#FFFFFF");c.setButtonsIcColor("#222222");c.setBorderColor("#FFFFFF");$("#myCanvas").css("background-color","#000000");c.setScrollbarTrackColor("#222222");c.setScrollbarHandlerColor("#FFFFFF");w.bgColor="#222222";w.fillColor="#FFFFFF";$("#borderColorSel").ColorPickerSetColor("#FFFFFF");$("#borderColorSel").css("background-color","#FFFFFF");$("#bgColorSel").ColorPickerSetColor("#000000");$("#bgColorSel").css("background-color","#000000");$("#buttonsBgColorSel").ColorPickerSetColor("#FFFFFF");$("#buttonsBgColorSel").css("background-color","#FFFFFF");$("#buttonsIcColorSel").ColorPickerSetColor("#222222");$("#buttonsIcColorSel").css("background-color","#222222");$("#scrollbarTrackColorSel").ColorPickerSetColor("#222222");$("#scrollbarTrackColorSel").css("background-color","#222222");$("#scrollbarHandlerColorSel").ColorPickerSetColor("#FFFFFF");$("#scrollbarHandlerColorSel").css("background-color","#FFFFFF");$("#prelBgColorSel").ColorPickerSetColor("#222222");$("#prelBgColorSel").css("background-color","#222222");$("#prelIcColorSel").ColorPickerSetColor("#FFFFFF");$("#prelIcColorSel").css("background-color","#FFFFFF")}function bT(){if(E){for(var a=0;a<r;a++){ba=q[a];ba.angle+=H}if(H>0)H-=.5;else H+=.5;if(Math.abs(H)<1){E=false;bi()}}}function bS(){if(f){if(bc.showPrevBtn){bo(R.getChildAt(0),R.prevBtnBgRed,R.prevBtnBgGreen,R.prevBtnBgBlue);bo(R.getChildAt(1),R.prevBtnIcRed,R.prevBtnIcGreen,R.prevBtnIcBlue)}if(bc.showNextBtn){bo(Q.getChildAt(0),Q.nextBtnBgRed,Q.nextBtnBgGreen,Q.nextBtnBgBlue);bo(Q.getChildAt(1),Q.nextBtnIcRed,Q.nextBtnIcGreen,Q.nextBtnIcBlue)}if(bc.showPlayBtn){bo(S.getChildAt(0),S.playBtnBgRed,S.playBtnBgGreen,S.playBtnBgBlue);bo(S.getChildAt(1),S.playBtnIcRed,S.playBtnIcGreen,S.playBtnIcBlue);bo(S.getChildAt(2),S.playBtnIcRed,S.playBtnIcGreen,S.playBtnIcBlue)}if(bc.showScrollbar){bp(v.trackRed,v.trackGreen,v.trackBlue,v.handlerRed,v.handlerGreen,v.handlerBlue)}}}function bR(){if(e){for(var a=0;a<r;a++){ba=q[a];ba.container.positionZ=bc.radiusZ*Math.sin(Math.PI/180*ba.angle)-bc.radiusZ;var b=i/(i-ba.container.positionZ);ba.container.x=bc.radiusX*Math.cos(Math.PI/180*ba.angle);ba.container.y=bc.radiusY*Math.sin(Math.PI/180*ba.angle)*b;ba.container.scaleX=m/ba.width*b;ba.container.scaleY=n/ba.height*b;ba.container.alpha=1-ba.container.positionZ/(-bc.radiusZ*2)*(1-bc.backThumbTransparency);if(a==j){if(!$.browser.opera){var c=new ColorFilter(1,1,1,1,J.redOffset,J.greenOffset,J.blueOffset,1);ba.imgContainer.filters=[c];ba.imgContainer.updateCache()}}else{if(!$.browser.opera){ba.imgContainer.filters=null;ba.imgContainer.updateCache()}}ba.container.rotation=-K.carouselAngle}t.rotation=K.carouselAngle;t.sortChildren(function(a,b){return a.positionZ-b.positionZ})}t.x=K.centerX;t.y=K.centerY}function bQ(){if(!d){u.rotation+=10}if(g){w.fillPreloader(I.transPercent/100)}}function bP(){var a;var b=bO(q[j].angle)%360;if(b>=90&&b<=270){a=90-b}else if(b>270){a=180-(b-270)}else{a=90-b}for(var c=0;c<r;c++){ba=q[c];var d=ba.angle+a;if(c==j){ba.selected=true}else{ba.selected=false}Tween.get(ba,{override:true}).to({angle:d},1e3,Ease.cubicOut)}}function bO(a){while(a<0)a+=360;return a}function bN(a){k=j;if(g){clearTimeout(x);Tween.get(I,{override:true}).to({transPercent:0},1e3,Ease.cubicOut);Tween.get(this).wait(1e3).call(bt)}if(a<0)j=a+r;else j=a%r;if(bc.showScrollbar&&!h){v.gotoItem(j)}bP();J.redOffset=1;J.greenOffset=1;J.blueOffset=1}function bM(a){var b=a.target.id;if(e){if(b!=j){bN(b)}else{window.open(q[b].url,"_blank")}}}function bL(a){$(bb).css("cursor","default");var b=a.target.id;if(b==j){Tween.get(L,{override:true}).to({alpha:0},400,Ease.cubicOut);Tween.get(J,{override:true}).to({redOffset:0,greenOffset:0,blueOffset:0},600,Ease.cubicOut)}}function bK(a){$(bb).css("cursor","pointer");var b=a.target.id;if(b==j){L.id=b;N.text=q[b].text;M.graphics=new Graphics;M.graphics.beginFill(bc.tooltipBgColor);M.graphics.drawRoundRect(0,0,N.getMeasuredWidth()+4,N.getMeasuredLineHeight()+8,4);M.graphics.moveTo((N.getMeasuredWidth()+4)/2-4,N.getMeasuredLineHeight()+8);M.graphics.lineTo((N.getMeasuredWidth()+4)/2,N.getMeasuredLineHeight()+16);M.graphics.lineTo((N.getMeasuredWidth()+4)/2+4,N.getMeasuredLineHeight()+8);M.graphics.endFill();M.y=-(N.getMeasuredLineHeight()+4)/2;N.x=2;N.y=N.getMeasuredLineHeight()/2;Tween.get(L,{override:true}).to({alpha:1},400,Ease.cubicOut);var c=q[b];Tween.get(J,{override:true}).to({redOffset:50,greenOffset:50,blueOffset:50},600,Ease.cubicOut)}}function bJ(){$(bb).mousewheel(function(a,b){if(b>0){bN(j+1)}else{bN(j-1)}})}function bI(){s.removeChild(u);d=true;var a=0;for(var b=0;b<r;b++){ba=q[b];ba.container.id=ba.id;ba.container.regX=ba.width/2;ba.container.regY=ba.height/2;ba.angle=b/r*360+90;ba.container.scaleX=0;ba.container.scaleY=0;ba.container.alpha=0;ba.container.positionZ=bc.radiusZ*Math.sin(Math.PI/180*ba.angle)-bc.radiusZ;var c=i/(i-ba.container.positionZ);ba.container.x=bc.radiusX*Math.cos(Math.PI/180*ba.angle);ba.container.y=bc.radiusY*Math.sin(Math.PI/180*ba.angle)*c;var f=m/ba.width*c;var g=n/ba.height*c;var h=1-ba.container.positionZ/(-bc.radiusZ*2)*(1-bc.backThumbTransparency);if(b!=r-1){Tween.get(ba.container).wait(a).to({scaleX:f,scaleY:g,alpha:h},1e3,Ease.cubicOut)}else{Tween.get(ba.container).wait(a).to({scaleX:f,scaleY:g,alpha:h},1e3,Ease.cubicOut).call(function(){e=true;bq();if(Touch.isSupported())s.onMouseDown=bf;if(bc.mousewheel){bJ()}})}ba.container.rotation=-K.carouselAngle;t.addChild(ba.container);ba.container.onMouseOver=bK;ba.container.onMouseOut=bL;ba.container.onClick=bM;a+=100}t.rotation=K.carouselAngle;q[0].selected=true;t.sortChildren(function(a,b){return a.positionZ-b.positionZ})}function bH(){var b=new Bitmap(Z);q[l].setImage(b,bc,a);l++;bG()}function bG(){if(l==r){bI();return}Z=new Image;Z.src=q[l].imagePath;Z.onload=bH}function bF(){h=false;s.onMouseUp=null;D=false;t.mouseEnabled=true;v.gotoItem(j);var a=parseInt(bc.scrollbarTrackColor.substring(1,3),16);var b=parseInt(bc.scrollbarTrackColor.substring(3,5),16);var c=parseInt(bc.scrollbarTrackColor.substring(5,7),16);var d=parseInt(bc.scrollbarHandlerColor.substring(1,3),16);var e=parseInt(bc.scrollbarHandlerColor.substring(3,5),16);var f=parseInt(bc.scrollbarHandlerColor.substring(5,7),16);Tween.get(v,{override:true}).to({trackRed:a,trackGreen:b,trackBlue:c,handlerRed:d,handlerGreen:e,handlerBlue:f},500,Ease.cubicOut)}function bE(a){h=true;y=a.stageX-v.handler.x-v.x;s.onMouseUp=bF}function bD(){$(bb).css("cursor","default");if(!h){var a=parseInt(bc.scrollbarTrackColor.substring(1,3),16);var b=parseInt(bc.scrollbarTrackColor.substring(3,5),16);var c=parseInt(bc.scrollbarTrackColor.substring(5,7),16);var d=parseInt(bc.scrollbarHandlerColor.substring(1,3),16);var e=parseInt(bc.scrollbarHandlerColor.substring(3,5),16);var f=parseInt(bc.scrollbarHandlerColor.substring(5,7),16);Tween.get(v,{override:true}).to({trackRed:a,trackGreen:b,trackBlue:c,handlerRed:d,handlerGreen:e,handlerBlue:f},500,Ease.cubicOut)}}function bC(){$(bb).css("cursor","pointer");var a=parseInt(bc.scrollbarHandlerColor.substring(1,3),16);var b=parseInt(bc.scrollbarHandlerColor.substring(3,5),16);var c=parseInt(bc.scrollbarHandlerColor.substring(5,7),16);var d=parseInt(bc.scrollbarTrackColor.substring(1,3),16);var e=parseInt(bc.scrollbarTrackColor.substring(3,5),16);var f=parseInt(bc.scrollbarTrackColor.substring(5,7),16);Tween.get(v,{override:true}).to({trackRed:a,trackGreen:b,trackBlue:c,handlerRed:d,handlerGreen:e,handlerBlue:f},500,Ease.cubicOut)}function bB(){$(bb).css("cursor","default");var a=parseInt(bc.playBtnBgColor.substring(1,3),16);var b=parseInt(bc.playBtnBgColor.substring(3,5),16);var c=parseInt(bc.playBtnBgColor.substring(5,7),16);var d=parseInt(bc.playBtnIcColor.substring(1,3),16);var e=parseInt(bc.playBtnIcColor.substring(3,5),16);var f=parseInt(bc.playBtnIcColor.substring(5,7),16);Tween.get(S,{override:true}).to({playBtnBgRed:a,playBtnBgGreen:b,playBtnBgBlue:c,playBtnIcRed:d,playBtnIcGreen:e,playBtnIcBlue:f},500,Ease.cubicOut)}function bA(){$(bb).css("cursor","pointer");var a=parseInt(bc.playBtnIcColor.substring(1,3),16);var b=parseInt(bc.playBtnIcColor.substring(3,5),16);var c=parseInt(bc.playBtnIcColor.substring(5,7),16);var d=parseInt(bc.playBtnBgColor.substring(1,3),16);var e=parseInt(bc.playBtnBgColor.substring(3,5),16);var f=parseInt(bc.playBtnBgColor.substring(5,7),16);Tween.get(S,{override:true}).to({playBtnBgRed:a,playBtnBgGreen:b,playBtnBgBlue:c,playBtnIcRed:d,playBtnIcGreen:e,playBtnIcBlue:f},500,Ease.cubicOut)}function bz(){$(bb).css("cursor","default");var a=parseInt(bc.nextBtnBgColor.substring(1,3),16);var b=parseInt(bc.nextBtnBgColor.substring(3,5),16);var c=parseInt(bc.nextBtnBgColor.substring(5,7),16);var d=parseInt(bc.nextBtnIcColor.substring(1,3),16);var e=parseInt(bc.nextBtnIcColor.substring(3,5),16);var f=parseInt(bc.nextBtnIcColor.substring(5,7),16);Tween.get(Q,{override:true}).to({nextBtnBgRed:a,nextBtnBgGreen:b,nextBtnBgBlue:c,nextBtnIcRed:d,nextBtnIcGreen:e,nextBtnIcBlue:f},500,Ease.cubicOut)}function by(){$(bb).css("cursor","pointer");var a=parseInt(bc.nextBtnIcColor.substring(1,3),16);var b=parseInt(bc.nextBtnIcColor.substring(3,5),16);var c=parseInt(bc.nextBtnIcColor.substring(5,7),16);var d=parseInt(bc.nextBtnBgColor.substring(1,3),16);var e=parseInt(bc.nextBtnBgColor.substring(3,5),16);var f=parseInt(bc.nextBtnBgColor.substring(5,7),16);Tween.get(Q,{override:true}).to({nextBtnBgRed:a,nextBtnBgGreen:b,nextBtnBgBlue:c,nextBtnIcRed:d,nextBtnIcGreen:e,nextBtnIcBlue:f},500,Ease.cubicOut)}function bx(){$(bb).css("cursor","default");var a=parseInt(bc.prevBtnBgColor.substring(1,3),16);var b=parseInt(bc.prevBtnBgColor.substring(3,5),16);var c=parseInt(bc.prevBtnBgColor.substring(5,7),16);var d=parseInt(bc.prevBtnIcColor.substring(1,3),16);var e=parseInt(bc.prevBtnIcColor.substring(3,5),16);var f=parseInt(bc.prevBtnIcColor.substring(5,7),16);Tween.get(R,{override:true}).to({prevBtnBgRed:a,prevBtnBgGreen:b,prevBtnBgBlue:c,prevBtnIcRed:d,prevBtnIcGreen:e,prevBtnIcBlue:f},500,Ease.cubicOut)}function bw(){$(bb).css("cursor","pointer");var a=parseInt(bc.prevBtnIcColor.substring(1,3),16);var b=parseInt(bc.prevBtnIcColor.substring(3,5),16);var c=parseInt(bc.prevBtnIcColor.substring(5,7),16);var d=parseInt(bc.prevBtnBgColor.substring(1,3),16);var e=parseInt(bc.prevBtnBgColor.substring(3,5),16);var f=parseInt(bc.prevBtnBgColor.substring(5,7),16);Tween.get(R,{override:true}).to({prevBtnBgRed:a,prevBtnBgGreen:b,prevBtnBgBlue:c,prevBtnIcRed:d,prevBtnIcGreen:e,prevBtnIcBlue:f},500,Ease.cubicOut)}function bv(){g=false;clearTimeout(x)}function bu(){if(g){bN(j-1);Tween.get(this).wait(1e3).call(bt);Tween.get(I,{override:true}).to({transPercent:0},1e3,Ease.cubicOut)}}function bt(){clearTimeout(x);x=setTimeout(bu,bc.slideshowDelay);Tween.get(I,{override:true}).to({transPercent:100},bc.slideshowDelay)}function bs(){g=true;bt()}function br(){f=true;if(bc.showPrevBtn){var a=new Bitmap(T);var b=new Bitmap(V);R.addChild(a);R.addChild(b);b.x=(T.width-V.width)/2;b.y=(T.height-V.height)/2;s.addChild(R);R.x=bc.prevButtonPosX;R.y=bc.prevButtonPosY;R.prevBtnBgRed=parseInt(bc.prevBtnBgColor.substring(1,3),16);R.prevBtnBgGreen=parseInt(bc.prevBtnBgColor.substring(3,5),16);R.prevBtnBgBlue=parseInt(bc.prevBtnBgColor.substring(5,7),16);R.prevBtnIcRed=parseInt(bc.prevBtnIcColor.substring(1,3),16);R.prevBtnIcGreen=parseInt(bc.prevBtnIcColor.substring(3,5),16);R.prevBtnIcBlue=parseInt(bc.prevBtnIcColor.substring(5,7),16);bo(a,R.prevBtnBgRed,R.prevBtnBgGreen,R.prevBtnBgBlue);bo(b,R.prevBtnIcRed,R.prevBtnIcGreen,R.prevBtnIcBlue);R.alpha=0;Tween.get(R).to({alpha:1},800,Ease.cubicOut).call(function(){R.onMouseOver=bw;R.onMouseOut=bx;R.onClick=function(){bN(j+1)}})}if(bc.showNextBtn){var c=new Bitmap(T);var d=new Bitmap(U);Q.addChild(c);Q.addChild(d);d.x=(T.width-U.width)/2;d.y=(T.height-U.height)/2;s.addChild(Q);Q.x=bc.nextButtonPosX;Q.y=bc.nextButtonPosY;Q.nextBtnBgRed=parseInt(bc.nextBtnBgColor.substring(1,3),16);Q.nextBtnBgGreen=parseInt(bc.nextBtnBgColor.substring(3,5),16);Q.nextBtnBgBlue=parseInt(bc.nextBtnBgColor.substring(5,7),16);Q.nextBtnIcRed=parseInt(bc.nextBtnIcColor.substring(1,3),16);Q.nextBtnIcGreen=parseInt(bc.nextBtnIcColor.substring(3,5),16);Q.nextBtnIcBlue=parseInt(bc.nextBtnIcColor.substring(5,7),16);bo(c,Q.nextBtnBgRed,Q.nextBtnBgGreen,Q.nextBtnBgBlue);bo(d,Q.nextBtnIcRed,Q.nextBtnIcGreen,Q.nextBtnIcBlue);Q.alpha=0;Tween.get(Q).to({alpha:1},800,Ease.cubicOut).call(function(){Q.onMouseOver=by;Q.onMouseOut=bz;Q.onClick=function(){bN(j-1)}})}if(bc.showPlayBtn){var e=new Bitmap(T);var h=new Bitmap(W);var i=new Bitmap(X);S.addChild(e);S.addChild(h);S.addChild(i);h.x=(T.width-W.width)/2;h.y=(T.height-W.height)/2;i.x=(T.width-X.width)/2;i.y=(T.height-X.height)/2;s.addChild(S);i.visible=false;S.x=bc.playButtonPosX;S.y=bc.playButtonPosY;S.playBtnBgRed=parseInt(bc.playBtnBgColor.substring(1,3),16);S.playBtnBgGreen=parseInt(bc.playBtnBgColor.substring(3,5),16);S.playBtnBgBlue=parseInt(bc.playBtnBgColor.substring(5,7),16);S.playBtnIcRed=parseInt(bc.playBtnIcColor.substring(1,3),16);S.playBtnIcGreen=parseInt(bc.playBtnIcColor.substring(3,5),16);S.playBtnIcBlue=parseInt(bc.playBtnIcColor.substring(5,7),16);bo(e,S.playBtnBgRed,S.playBtnBgGreen,S.playBtnBgBlue);bo(h,S.playBtnIcRed,S.playBtnIcGreen,S.playBtnIcBlue);bo(i,S.playBtnIcRed,S.playBtnIcGreen,S.playBtnIcBlue);S.alpha=0;Tween.get(S).to({alpha:1},800,Ease.cubicOut).call(function(){S.onMouseOver=bA;S.onMouseOut=bB;S.onClick=function(){if(g){bv();S.getChildAt(1).visible=true;S.getChildAt(2).visible=false;Tween.get(w,{override:true}).to({alpha:0},800,Ease.cubicOut)}else{Tween.get(w,{override:true}).to({alpha:1},800,Ease.cubicOut);I.transPercent=0;bs();S.getChildAt(1).visible=false;S.getChildAt(2).visible=true}}})}w=new TransitionPreloader(bc);s.addChild(w);w.fillPreloader(0);w.alpha=0;if(bc.autoplay){Tween.get(w,{override:true}).to({alpha:1},500,Ease.cubicOut);I.transPercent=0;bs();S.getChildAt(1).visible=false;S.getChildAt(2).visible=true}if(bc.showScrollbar){v=new ScrollBar(bc,Y);s.addChild(v);v.trackRed=parseInt(bc.scrollbarTrackColor.substring(1,3),16);v.trackGreen=parseInt(bc.scrollbarTrackColor.substring(3,5),16);v.trackBlue=parseInt(bc.scrollbarTrackColor.substring(5,7),16);v.handlerRed=parseInt(bc.scrollbarHandlerColor.substring(1,3),16);v.handlerGreen=parseInt(bc.scrollbarHandlerColor.substring(3,5),16);v.handlerBlue=parseInt(bc.scrollbarHandlerColor.substring(5,7),16);bp(v.trackRed,v.trackGreen,v.trackBlue,v.handlerRed,v.handlerGreen,v.handlerBlue);v.alpha=0;Tween.get(v).to({alpha:1},800,Ease.cubicOut).call(function(){v.handler.onMouseOver=bC;v.handler.onMouseOut=bD;v.handler.onPress=bE})}}function bq(){T.src=bc.buttonsBackgroundPath;T.onload=function(){U.src=bc.buttonsNextIconPath;U.onload=function(){V.src=bc.buttonsPrevIconPath;V.onload=function(){W.src=bc.buttonsPlayIconPath;W.onload=function(){X.src=bc.buttonsPauseIconPath;X.onload=function(){Y.src=bc.scrollbarLinesPath;Y.onload=br}}}}}}function bp(a,b,c,d,e,f){var g=new ColorFilter(a/255,b/255,c/255,1);var h=new ColorFilter(d/255,e/255,f/255,1);v.track.filters=[g];v.handlerBar.filters=[h];v.lines.filters=[g];v.track.updateCache();v.handlerBar.updateCache();v.lines.updateCache()}function bo(a,b,c,d){var e=new ColorFilter(b/255,c/255,d/255,1);a.filters=[e];a.cache(0,0,a.image.width,a.image.height)}function bn(a,b){var c=parseInt(b.substring(1,3),16);var d=parseInt(b.substring(3,5),16);var e=parseInt(b.substring(5,7),16);var f=new ColorFilter(c/255,d/255,e/255,1);a.filters=[f];a.cache(0,0,a.image.width,a.image.height)}function bm(){u=new Bitmap(_);s.addChild(u);u.scaleX=bc.preloaderSize/_.width;u.scaleY=bc.preloaderSize/_.height;u.regX=_.width/2;u.regY=_.height/2;u.x=bc.canvasWidth/2;u.y=bc.canvasHeight/2;bn(u,bc.preloaderColor);Ticker.setFPS(40);Ticker.addListener(c)}function bl(){t.mouseEnabled=false;v.mouseEnabled=false;R.mouseEnabled=false;Q.mouseEnabled=false;S.mouseEnabled=false;if(g){clearTimeout(x);Tween.get(I,{override:true}).to({transPercent:0},1e3,Ease.cubicOut)}}function bk(){t.mouseEnabled=true;v.mouseEnabled=true;R.mouseEnabled=true;Q.mouseEnabled=true;S.mouseEnabled=true;if(g){bt()}}function bj(a){D=false;C=false;if(F)bi()}function bi(){var a=0;var b=bO(q[0].angle)%360;for(var c=1;c<r;c++){ba=q[c];var d=bO(ba.angle)%360;if(Math.abs(d-90)<Math.abs(b-90)){b=d;a=c}}bN(a);F=false;bk()}function bh(a){if(D){D=false;C=false;F=true;if(Math.abs(H)<5){bi()}else{E=true}}}function bg(a){L.x=a.stageX-(N.getMeasuredWidth()+4)/2;L.y=a.stageY-(N.getMeasuredLineHeight()+4)/2-16;if(L.id!=j)Tween.get(L,{override:true}).to({alpha:0},400,Ease.cubicOut);if(h){var b=Math.min(Math.max(a.stageX-v.x-y,0),v.width-v.handlerWidth);v.handler.x=b;var c=Math.floor(b/(v.width-v.handlerWidth)*r);if(c==r)c--;if(c!=j)bN(c)}else if(C){D=true;bl();s.onMouseUp=bh;B=A;A=a.stageX;G=z-A;for(var d=0;d<r;d++){ba=q[d];ba.angle=ba.tempAngle+G/4}H=B-A;if(H>20)H=20;if(H<-20)H=-20}}function bf(a){A=a.stageX;z=A;C=true;E=false;G=0;H=0;for(var b=0;b<r;b++){ba=q[b];Tween.removeTweens(ba);ba.tempAngle=ba.angle}s.onMouseUp=bj}function be(){bb.width=bc.canvasWidth;bb.height=bc.canvasHeight;$(bb).css("background-color",bc.backgroundColor);m=bc.thumbWidth;n=bc.thumbHeight;o=bc.reflHeight;p=bc.reflTransparency;q=bc.thumbsAr;r=bc.nrImages;s=new Stage(bb);s.enableMouseOver(40);Touch.enable(s);t=new Container;s.addChild(t);K.centerX=364;K.centerY=220;bc.centerX=364;bc.centerY=300;K.carouselAngle=bc.carouselAngle;_.src=bc.preloaderPath;_.onload=bm;L=new Container;M=new Shape;N=new Text("",bc.tooltipTextSize+"px "+bc.tooltipFont,bc.tooltipTextColor);L.addChild(M);L.addChild(N);s.addChild(L);L.alpha=0;s.onMouseMove=bg}function bd(){be();bG()}var c=this;var d=false;var e=false;var f=false;var g=false;var h=false;var i=250;var j=0;var k=-1;var l=0;var m;var n;var o;var p;var q;var r;var s;var t;var u;var v;var w;var x;var y;var z;var A;var B;var C=false;var D=false;var E=false;var F=false;var G=0;var H=0;var I=new Object;I.transPercent=0;var J=new Object;J.redOffset=0;J.greenOffset=0;J.blueOffset=0;var K=new Object;K.centerX=0;K.centerY=0;K.carouselAngle=0;var L;var M;var N;var O;var P;var Q=new Container;var R=new Container;var S=new Container;var T=new Image;var U=new Image;var V=new Image;var W=new Image;var X=new Image;var Y=new Image;var Z=new Image;var _=new Image;var ba;var bb=$("#"+a)[0];if(!bb){alert("Invalid canvas id: "+a)}var bc=new Data(b);$(bc).bind("loaded",bd);this.tick=function(){bQ();bR();bS();bT();s.update()};this.setRadiusX=function(a){bc.radiusX=a};this.setRadiusY=function(a){bc.radiusY=a};this.setRadiusZ=function(a){bc.radiusZ=a;bP()};this.setCenterX=function(a){K.centerX=parseInt(bc.centerX)+parseInt(a)};this.setCenterY=function(a){K.centerY=parseInt(bc.centerY)+parseInt(a)};this.setAngle=function(a){K.carouselAngle=a};this.setBorderColor=function(a){for(var b=0;b<r;b++){ba=q[b];ba.setBorderColor(a);ba.imgContainer.updateCache()}};this.setShowRefl=function(a){for(var b=0;b<r;b++){ba=q[b];if(a){ba.reflection.visible=true;ba.imgContainer.updateCache()}else{ba.reflection.visible=false;ba.imgContainer.updateCache()}}};this.setButtonsBgColor=function(a){bc.prevBtnBgColor=a;bc.nextBtnBgColor=a;bc.playBtnBgColor=a;R.prevBtnBgRed=parseInt(bc.prevBtnBgColor.substring(1,3),16);R.prevBtnBgGreen=parseInt(bc.prevBtnBgColor.substring(3,5),16);R.prevBtnBgBlue=parseInt(bc.prevBtnBgColor.substring(5,7),16);Q.nextBtnBgRed=parseInt(bc.nextBtnBgColor.substring(1,3),16);Q.nextBtnBgGreen=parseInt(bc.nextBtnBgColor.substring(3,5),16);Q.nextBtnBgBlue=parseInt(bc.nextBtnBgColor.substring(5,7),16);S.playBtnBgRed=parseInt(bc.playBtnBgColor.substring(1,3),16);S.playBtnBgGreen=parseInt(bc.playBtnBgColor.substring(3,5),16);S.playBtnBgBlue=parseInt(bc.playBtnBgColor.substring(5,7),16)};this.setButtonsIcColor=function(a){bc.prevBtnIcColor=a;bc.nextBtnIcColor=a;bc.playBtnIcColor=a;R.prevBtnIcRed=parseInt(bc.prevBtnIcColor.substring(1,3),16);R.prevBtnIcGreen=parseInt(bc.prevBtnIcColor.substring(3,5),16);R.prevBtnIcBlue=parseInt(bc.prevBtnIcColor.substring(5,7),16);Q.nextBtnIcRed=parseInt(bc.nextBtnIcColor.substring(1,3),16);Q.nextBtnIcGreen=parseInt(bc.nextBtnIcColor.substring(3,5),16);Q.nextBtnIcBlue=parseInt(bc.nextBtnIcColor.substring(5,7),16);S.playBtnIcRed=parseInt(bc.playBtnIcColor.substring(1,3),16);S.playBtnIcGreen=parseInt(bc.playBtnIcColor.substring(3,5),16);S.playBtnIcBlue=parseInt(bc.playBtnIcColor.substring(5,7),16)};this.setScrollbarTrackColor=function(a){bc.scrollbarTrackColor=a;v.trackRed=parseInt(bc.scrollbarTrackColor.substring(1,3),16);v.trackGreen=parseInt(bc.scrollbarTrackColor.substring(3,5),16);v.trackBlue=parseInt(bc.scrollbarTrackColor.substring(5,7),16)};this.setScrollbarHandlerColor=function(a){bc.scrollbarHandlerColor=a;v.handlerRed=parseInt(bc.scrollbarHandlerColor.substring(1,3),16);v.handlerGreen=parseInt(bc.scrollbarHandlerColor.substring(3,5),16);v.handlerBlue=parseInt(bc.scrollbarHandlerColor.substring(5,7),16)};this.setReflDistance=function(a){bc.reflDistance=a;for(var b=0;b<r;b++){ba=q[b];ba.reflection.y=ba.imgH+bc.borderSize*2+bc.reflDistance;ba.imgContainer.cache(0,0,ba.imageWidth+bc.borderSize*2,ba.imageHeight+bc.borderSize*2+bc.reflHeight+bc.reflDistance)}};this.setShowScrollbar=function(a){if(a){v.visible=true}else{v.visible=false}};this.setPreloaderBgColor=function(a){w.bgColor=a};this.setPreloaderIcColor=function(a){w.fillColor=a};this.setPreset=function(a){switch(a){case 1:bU(300,100,150,0,-80,0,0,true,true);break;case 2:bU(190,0,190,10,-10,90,1,false,true);break;case 3:bU(286,-26,322,10,-25,40,15,true,true);break;case 4:bU(225,26,100,10,-25,165,1,true,true);break;case 5:bU(320,-30,260,5,-15,30,1,true,true);break;case 6:bU(300,0,150,0,-50,0,1,true,true);break}}}TransitionPreloader.prototype=new Shape;TransitionPreloader.prototype.constructor=TransitionPreloader;ScrollBar.prototype=new Container;ScrollBar.prototype.constructor=ScrollBar